<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../App.css" />
    <script type="module" src="../plantjs/getPlants.js"></script> 
    <script src="../responsive.js"></script>
</head>
<body>
    <header>
        <nav>
            <!-- home button -->
            <a href="../index.html">
                <span class="material-icons md-36">
                    home
                </span>
            </a>

            <!-- zipcode Searchbar -->
            <form id="zSearch" class="search-container">
                <input type="text" placeholder="Zipcode" name="zipcode" class="zipSearch searchBar" id="zName">
                <button type="submit">
                  <span class="material-icons">
                      search
                  </span>
                </button>
          </form>

            <!-- plant name searchbar -->
            <form id="pSearch" class="search-container">
                <input type="text" placeholder="Plant Name" name="search" class="plantSearch searchBar"id="pName">
                <button type="submit">
                  <span class="material-icons">
                      search
                  </span>
                </button>
            </form>
            
            <!-- Account Dropdown -->
            <div class="dropdown logged-in">
                <button class="dropbtn">
                    <i id ="accountcircle" class="material-icons md-36">account_circle</i>
                    Account
                    <span class="material-icons md-24">expand_more</span>
                </button>
                <div class="dropdown-content">
                    <a href="./login.html" class="logged-out">Log In</a>
                    <a href="./sign-up.html" class="logged-out">Sign Up</a>
                    <a href="../UserAuth/signOut.php" class="logged-in">Sign Out</a>
                    <a href="./userInfo.html" class="logged-in">Account Information</a>
                </div>
            </div>

            <!-- mobile hamberger view -->
            <a href="javascript:void(0);" class="icon" onclick="responsive()">
                <i id ="menu" class="material-icons md-36">menu</i>
            </a>
        </nav>
    </header>

    <main>
        <h1>
            Reset Password
        </h1>

        <div id = "Message"> </div>
        <script>
            var messDiv = document.getElementById('Message');//Get the location of the Div for feedback message
            message="";

            var url = window.location.href; //Get URL
            var sig = /sig=([^&]+)/.exec(url)[1]; //Get the value of sig from URL
            
            if(typeof sig !== 'undefined'){ ///If sig is defined
                if(sig == "IE"){ //If sig=IE (AKA Invalid Email)
                    message = '<h3>Invalid Email. Please try again.</h3>';
                }
                if(sig == "ES"){ //If sig=IE (AKA Invalid Email)
                    message = '<h3>Reset Email sent to the provided address.</h3>';
                }
                messDiv.insertAdjacentHTML('afterbegin', message); //Add message to feedback message div
            }
        </script>

        <!-- Sign up form -->
        <form id="resetpassword-form" method="post" action="../../API/api/user/resetEmail.php">
            <div class="input-field">
                    <label for="reset-email" class="visually-hidden">Password</label>
                    <input name ="reset-email" type="email" id="reset-email" placeholder="Email" required class="userInfo">
            </div>
            <div>
                <button class ="signupbtn" id="signupbtn" value="Submit">Send Link</button>
            </div>

        </form>
        
    </main>

<footer>
    <p>
        <a href="pages/about.html">About</a><br>
        &copy 2023 Daniel Dietrich, Gavin Cyr, Kira Luethe, Richard Williams, & Todd Wood
    </p>
</footer>

<!-- loads only items in class "logged-in" or "logged-out" -->
<script src="../ui.js"></script>
</body>
</html>